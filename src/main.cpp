#include <Arduino.h>
#include <Control_Surface.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SH1106.h>
#include <Wire.h>
#include <SPI.h>
//===================================================================== OLED
#define OLED_RESET -1
Adafruit_SH1106 display(OLED_RESET);
//===================================================================== Anoying Dog Hat Frames
// 'Hat_Frame0', 27x27px
const unsigned char epd_bitmap_Hat_Frame0 [] PROGMEM = {
	0x00, 0x60, 0x00, 0x00, 0x00, 0x90, 0x00, 0x00, 0x01, 0x08, 0x00, 0x00, 0x01, 0x08, 0x00, 0x00, 
	0x02, 0x04, 0x00, 0x00, 0x02, 0x04, 0x00, 0x00, 0x7d, 0x6b, 0xf8, 0x00, 0x80, 0x00, 0x04, 0x00, 
	0xfb, 0xde, 0xf4, 0x00, 0xb1, 0x8c, 0x64, 0x00, 0x40, 0x00, 0x08, 0x00, 0x3f, 0xff, 0xf0, 0x00, 
	0x0c, 0x01, 0x00, 0x00, 0x09, 0x21, 0x80, 0x00, 0x08, 0x00, 0x60, 0x00, 0x08, 0xc0, 0x1f, 0xc0, 
	0x0a, 0x90, 0x00, 0x20, 0x09, 0xe0, 0x01, 0xc0, 0x08, 0x00, 0x01, 0x00, 0x08, 0x00, 0x01, 0x00, 
	0x08, 0x00, 0x01, 0x00, 0x08, 0x00, 0x02, 0x00, 0x04, 0x00, 0x02, 0x00, 0x04, 0xcf, 0x32, 0x00, 
	0x04, 0xd1, 0x52, 0x00, 0x05, 0x20, 0x94, 0x00, 0x02, 0x00, 0x08, 0x00
};
// 'Hat_Frame1', 27x27px
const unsigned char epd_bitmap_Hat_Frame1 [] PROGMEM = {
	0x00, 0x60, 0x00, 0x00, 0x00, 0x90, 0x00, 0x00, 0x01, 0x08, 0x00, 0x00, 0x01, 0x08, 0x00, 0x00, 
	0x02, 0x04, 0x00, 0x00, 0x02, 0x04, 0x00, 0x00, 0x7d, 0x6b, 0xf8, 0x00, 0x80, 0x00, 0x04, 0x00, 
	0xfb, 0xde, 0xf4, 0x00, 0xb1, 0x8c, 0x64, 0x00, 0x40, 0x00, 0x08, 0x00, 0x3f, 0xff, 0xf0, 0x00, 
	0x0c, 0x01, 0x02, 0x00, 0x09, 0x21, 0x85, 0x00, 0x08, 0x00, 0x65, 0x00, 0x08, 0xc0, 0x1d, 0x00, 
	0x0a, 0x90, 0x01, 0x00, 0x09, 0xe0, 0x01, 0x00, 0x08, 0x00, 0x01, 0x00, 0x08, 0x00, 0x01, 0x00, 
	0x08, 0x00, 0x01, 0x00, 0x08, 0x00, 0x02, 0x00, 0x04, 0x00, 0x02, 0x00, 0x04, 0xcf, 0x32, 0x00, 
	0x05, 0x49, 0x52, 0x00, 0x02, 0x50, 0x94, 0x00, 0x00, 0x20, 0x08, 0x00
};
// Array of all bitmaps for convenience. (Total bytes used to store images in PROGMEM = 256)
const int epd_bitmap_Hat_allArray_LEN = 2;
const unsigned char* epd_bitmap_Hat_allArray[2] = {
	epd_bitmap_Hat_Frame0,
	epd_bitmap_Hat_Frame1
};
//===================================================================== Anoying Dog Sleep Frames
// 'Frame0', 26x12px
const unsigned char epd_bitmap_Sleep_Frame0 [] PROGMEM = {
	0x00, 0x3f, 0x00, 0x00, 0x0f, 0xc0, 0xe0, 0x00, 0x10, 0x00, 0x18, 0x00, 0x20, 0x40, 0x04, 0x00, 
	0x42, 0x20, 0x02, 0x00, 0x42, 0x20, 0x02, 0x00, 0xc0, 0xe2, 0x02, 0x00, 0x82, 0xa3, 0x02, 0x00, 
	0x42, 0x21, 0x02, 0x00, 0x60, 0x47, 0x01, 0x00, 0x40, 0x01, 0x04, 0x80, 0x7f, 0xff, 0xff, 0x80
};
// 'Frame1', 26x12px
const unsigned char epd_bitmap_Sleep_Frame1 [] PROGMEM = {
	0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xc0, 0x00, 0x10, 0x00, 0x38, 0x00, 0x20, 0x00, 0x04, 0x00, 
	0x42, 0x40, 0x02, 0x00, 0x42, 0x20, 0x02, 0x00, 0xc0, 0xe1, 0x02, 0x00, 0x82, 0xa1, 0x82, 0x80, 
	0x42, 0x20, 0x83, 0x40, 0x60, 0x43, 0x80, 0xc0, 0x40, 0x00, 0x87, 0x00, 0x7f, 0xff, 0xfc, 0x00
};
// Array of all bitmaps for convenience. (Total bytes used to store images in PROGMEM = 128)
const int epd_bitmap_Sleep_allArray_LEN = 2;
const unsigned char* epd_bitmap_Sleep_allArray[2] = {
	epd_bitmap_Sleep_Frame0,
	epd_bitmap_Sleep_Frame1
};
//===================================================================== Anoying Dog Bone Frames
// 'Frame0', 34x15px
const unsigned char epd_bitmap_Bone_Frame0 [] PROGMEM = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2f, 0x40, 0x00, 0x00, 0x00, 
	0x50, 0xa0, 0x00, 0x00, 0x00, 0x40, 0x20, 0x00, 0x00, 0x00, 0x40, 0x1f, 0x80, 0x00, 0x00, 0x92, 
	0x00, 0x60, 0x00, 0x70, 0x80, 0x70, 0x10, 0x00, 0x8c, 0x8c, 0x88, 0x10, 0x00, 0x83, 0xe9, 0x08, 
	0x92, 0x00, 0x40, 0x1e, 0x11, 0x0d, 0x00, 0x80, 0x00, 0x09, 0x09, 0x00, 0x8f, 0xff, 0x8b, 0x03, 
	0x00, 0x70, 0x92, 0x74, 0x1c, 0x00, 0x00, 0x61, 0x83, 0xe0, 0x00
};
// 'Frame1', 34x15px
const unsigned char epd_bitmap_Bone_Frame1 [] PROGMEM = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2f, 0x40, 0x00, 0x00, 0x00, 0x50, 0xa0, 0x00, 0x00, 0x00, 
	0x40, 0x20, 0x00, 0x00, 0x00, 0x40, 0x10, 0x00, 0x00, 0x00, 0x92, 0x1f, 0x80, 0x00, 0x00, 0x80, 
	0x00, 0x60, 0x00, 0x70, 0x8c, 0x70, 0x10, 0x00, 0x8c, 0xa9, 0x88, 0x10, 0x00, 0x83, 0xff, 0x08, 
	0x90, 0x00, 0x40, 0x00, 0x11, 0x08, 0x00, 0x80, 0x00, 0x09, 0x0e, 0x00, 0x8f, 0xff, 0x8b, 0x01, 
	0x80, 0x70, 0x92, 0x74, 0x1c, 0x40, 0x00, 0x61, 0x83, 0xe3, 0x80
};
// 'Frame2', 34x15px
const unsigned char epd_bitmap_Bone_Frame2 [] PROGMEM = {
	0x00, 0x2f, 0x40, 0x00, 0x00, 0x00, 0x50, 0xa0, 0x00, 0x00, 0x00, 0x40, 0x20, 0x00, 0x00, 0x00, 
	0x40, 0x10, 0x00, 0x00, 0x00, 0x92, 0x10, 0x00, 0x00, 0x00, 0x80, 0x1f, 0x80, 0x00, 0x00, 0x8c, 
	0x00, 0x60, 0x00, 0x70, 0xa9, 0x70, 0x10, 0x00, 0x8c, 0xbf, 0x88, 0x10, 0x00, 0x83, 0xff, 0x08, 
	0x92, 0x00, 0x40, 0x00, 0x11, 0x0d, 0x00, 0x80, 0x00, 0x09, 0x09, 0x00, 0x8f, 0xff, 0x8b, 0x03, 
	0x00, 0x70, 0x92, 0x74, 0x1c, 0x00, 0x00, 0x61, 0x83, 0xe0, 0x00
};
// Array of all bitmaps for convenience. (Total bytes used to store images in PROGMEM = 288)
const int epd_bitmap_Bone_allArray_LEN = 3;
const unsigned char* epd_bitmap_Bone_allArray[3] = {
	epd_bitmap_Bone_Frame0,
	epd_bitmap_Bone_Frame1,
	epd_bitmap_Bone_Frame2
};
//===================================================================== Anoying Dog Walk Frames
// 'Frame0', 23x18px
const unsigned char epd_bitmap_Walk_Frame0 [] PROGMEM = {
	0x2f, 0x40, 0x00, 0x50, 0xa0, 0x00, 0x40, 0x20, 0x00, 0x40, 0x10, 0x00, 0x92, 0x18, 0x00, 0x80, 
	0x06, 0x00, 0x8c, 0x01, 0xfc, 0xa9, 0x00, 0x02, 0x9e, 0x00, 0x1c, 0x80, 0x00, 0x10, 0x80, 0x00, 
	0x10, 0x80, 0x00, 0x10, 0x80, 0x00, 0x20, 0x40, 0x00, 0x20, 0x4c, 0xf3, 0x20, 0x4d, 0x15, 0x20, 
	0x52, 0x09, 0x40, 0x20, 0x00, 0x80
};
// 'Frame1', 23x18px
const unsigned char epd_bitmap_Walk_Frame1 [] PROGMEM = {
	0x2f, 0x40, 0x00, 0x50, 0xa0, 0x00, 0x40, 0x20, 0x00, 0x40, 0x10, 0x20, 0x92, 0x18, 0x50, 0x80, 
	0x06, 0x50, 0x8c, 0x01, 0xd0, 0xa9, 0x00, 0x10, 0x9e, 0x00, 0x10, 0x80, 0x00, 0x10, 0x80, 0x00, 
	0x10, 0x80, 0x00, 0x10, 0x80, 0x00, 0x20, 0x40, 0x00, 0x20, 0x4c, 0xf3, 0x20, 0x54, 0x93, 0x40, 
	0x25, 0x14, 0x80, 0x02, 0x08, 0x00
};
// Array of all bitmaps for convenience. (Total bytes used to store images in PROGMEM = 160)
const int epd_bitmap_Walk_allArray_LEN = 2;
const unsigned char* epd_bitmap_Walk_allArray[2] = {
	epd_bitmap_Walk_Frame0,
	epd_bitmap_Walk_Frame1
};
//===================================================================== Dance()
void Dance(int x, int y){
  display.clearDisplay();
  display.drawBitmap(x,y, epd_bitmap_Hat_allArray[0],27,27, WHITE);
  display.display();
  delay(200);
  display.clearDisplay();
  display.drawBitmap(x,y, epd_bitmap_Hat_allArray[1],27,27, WHITE);
  display.display();
  delay(200);
}

void setup() {
 Serial.begin(9600);  //initializing Serialport
  Serial.write("Initializing Display");
  display.begin(SH1106_SWITCHCAPVCC, 0x3C);   //initializing display, 
  display.clearDisplay();
  display.setTextSize(1);
  display.setTextColor(WHITE);
  display.setCursor(0,0);
  display.print("PP World!");
  display.display();
  delay(1000);
}

void loop() {
  int x = random(0, 128-27);
  int y = random(0, 64-27);
  Dance(x,y);
}